Не буду много воды тут лить, сразу к теме…

Не парсит Вайлдберрис только ленивый… Его парсит Озон и Яндекс и другие площадки. Сервисы аналитики, которые пытаются данные продавать под видов офигенного и уникального ноу-хау, но всё намного прозаичнее и примитивнее… И главное бессмысленнее.

Если кто любит видосики, там я в конце рассказываю, что да как прям на видео. А так…

САМЫЙ ПОПУЛЯРНЫЙ ИСТОЧНИК ИНФОРМАЦИИ, КОТОРЫЙ ПАРСЯТ ВСЕ!!!

Вот ссылка: https://card.wb.ru/cards/detail?appType=0&curr=rub&dest=-1257786&spp=30&nm=(здесь артикул ВБ цифровой без скобок после знака “равно”)

Секретик, в конце через ; без пробелов можно вписывать до 100 артикулов спокойно. Расшифрую то что расположено в data (для артикула 68789915)«products»:[{«id»:68789915,»root»:36673566,»kindId»:0,»brand»:»bath-ducks»,»brandId»:705923,»siteBrandId»:715923,»colors»:[{«name»:»желтый»,»id»:16776960},{«name»:»оранжевый»,»id»:16753920}],»subjectId»:227,»subjectParentId»:7,»name»:»Игрушки для ванной уточки»,»entity»:»Игрушки для ванной»,»matchId»:0,»supplier»:»Diamod Shop»,»supplierId»:133072,»supplierRating»:4.7,»supplierFlags»:0,»priceU»:185000,»salePriceU»:49000,»logisticsCost»:0,»sale»:73,»returnCost»:0,»diffPrice»:false,»saleConditions»:134217728,»pics»:9,»rating»:5,»reviewRating»:4.8,»nmReviewRating»:4.8,»feedbacks»:3929,»nmFeedbacks»:1769,»panelPromoId»:195704,»promoTextCard»:»КИБЕР СКИДКИ»,»promoTextCat»:»КИБЕР СКИДКИ»,»volume»:28,»viewFlags»:1679377,»promotions»:[62705,63484,71630,128448,164876,175386,178415,183019,184784,190352,190353,194528,195432,195603,195704],»sizes»:[{«name»:»»,»origName»:»0″,»rank»:0,»optionId»:118294264,»returnCost»:0,»stocks»:[{«wh»:507,»dtype»:4,»qty»:27,»priority»:89970,»time1″:2,»time2″:21},{«wh»:205228,»dtype»:4,»qty»:1,»priority»:81771,»time1″:2,»time2″:28},{«wh»:301760,»dtype»:4,»qty»:142,»priority»:84249,»time1″:1,»time2″:27},{«wh»:301809,»dtype»:4,»qty»:1,»priority»:77722,»time1″:1,»time2″:30},{«wh»:206348,»dtype»:4,»qty»:212,»priority»:87785,»time1″:2,»time2″:23},{«wh»:117501,»dtype»:4,»qty»:48,»priority»:90815,»time1″:1,»time2″:21},{«wh»:130744,»dtype»:4,»qty»:1,»priority»:40575,»time1″:2,»time2″:48},{«wh»:120762,»dtype»:4,»qty»:109,»priority»:89982,»time1″:3,»time2″:20},{«wh»:208277,»dtype»:4,»qty»:65,»priority»:42614,»time1″:2,»time2″:45},{«wh»:117986,»dtype»:4,»qty»:27,»priority»:53775,»time1″:2,»time2″:40}],»time1″:1,»time2″:21,»wh»:117501,»dtype»:4,»sign»:»T0GQjaI1bkG8UVspjA6WNemUF8E=»,»payload»:»mNp8Z5umGQT4Bg0H6OvRf10epe9OLJRGkyLUn07m3NF6d7Z3XZPo/2bx3NFZqeX5Rd0″}],»totalQuantity»:633,»time1″:1,»time2″:21,»wh»:117501,»dtype»:4}]}

1. “id”:68789915 – артикул
2. “kindId”:0 – пол. 0-бесполое
3. “brand”:”bath-ducks” – название бренда
4. “brandId”:705923 – id бренда, есть еще источники откуда стат по бренду вытаскивать можно зная этот id
5. “colors” – список цветов
6. “subjectId”:227 – id предмета
7. “subjectParentId”:7 – id родительской категории
8. “name”:”Игрушки для ванной уточки” – наименование
9. “entity”:”Игрушки для ванной” – категория
10. “supplier”:”Diamod Shop” – название магазина ЮЛ
11. “supplierId”:133072 – id юл, можно вытащить из другого открытого источника данные по ЮЛ
12. “supplierRating”:4.7 – рейтинг поставщика
13. “priceU”:185000,”salePriceU”:49000,”logisticsCost”:0,”sale”:73 – ценообразование на сайте
14. “returnCost”:0 – стоимость возврата
15. “pics”:9 – количество картинок
16. “rating”:5 – звездочки округленные до целого для всех склеенных карточек
17. “reviewRating”:4.8 – звездочки НЕ округленные до целого для всех склеенных карточек
18. “nmReviewRating”:4.8 – звездочки НЕ округленные до целого для конкретного варианта товара
19. “feedbacks”:3929 – кол-во отзывов для всех склеенных карточек
20. “nmFeedbacks”:1769 – кол-во отзывов для всех конкретного варианта
21. “panelPromoId”:195704,”promoTextCard”:”КИБЕР СКИДКИ” – id и название акции
22. “volume”:28 – объем единицы товара в литрах. Только не 28, а 2.8 литра

И отдельно по sizes. Вайлдберрис изначально был оцифрованным каталогом ОТТО поэтому всегда у товара размер (вот как выглядит кусок с сайзами”

«sizes»:[{«name»:»»,»origName»:»0″,»rank»:0,»optionId»:118294264,»returnCost»:0,»stocks»:[{«wh»:507,»dtype»:4,»qty»:27,»priority»:89970,»time1″:2,»time2″:21},{«wh»:205228,»dtype»:4,»qty»:1,»priority»:81771,»time1″:2,»time2″:28},{«wh»:301760,»dtype»:4,»qty»:142,»priority»:84249,»time1″:1,»time2″:27},{«wh»:301809,»dtype»:4,»qty»:1,»priority»:77722,»time1″:1,»time2″:30},{«wh»:206348,»dtype»:4,»qty»:212,»priority»:87785,»time1″:2,»time2″:23},{«wh»:117501,»dtype»:4,»qty»:48,»priority»:90815,»time1″:1,»time2″:21},{«wh»:130744,»dtype»:4,»qty»:1,»priority»:40575,»time1″:2,»time2″:48},{«wh»:120762,»dtype»:4,»qty»:109,»priority»:89982,»time1″:3,»time2″:20},{«wh»:208277,»dtype»:4,»qty»:65,»priority»:42614,»time1″:2,»time2″:45},{«wh»:117986,»dtype»:4,»qty»:27,»priority»:53775,»time1″:2,»time2″:40}],»time1″:1,»time2″:21,»wh»:117501,»dtype»:4,»sign»:»T0GQjaI1bkG8UVspjA6WNemUF8E=»,»payload»:»mNp8Z5umGQT4Bg0H6OvRf10epe9OLJRGkyLUn07m3NF6d7Z3XZPo/2bx3NFZqeX5Rd0″}],»totalQuantity»:633,»time1″:1,»time2″:21,»wh»:117501,»dtype»:4}]}

В данном случае товар без размерной линейки поэтому

name – отсутствует. Как назвали размер
origName – 0. Потому что отстутствует
“wh”:507 – warhouse если развернуть сокращение – id склада (в данном случае 507 указывает 100% что это Коледино)
“dtype”:4 – способ продажи. В данном случае 4 FBO, если 1 то FBS
“qty”:27 – quantity – количество остатков онлайн. ВБ это нужно чтобы показывать/не показывать товар, показывать полосочкой сколько осталось, не давать заказывать больше чем остатков
“priority”:89970 – если утрировать, то это ГЕО приоритет в зависимости от склада и точки откуда смотрит покупатель
“time1”:2 – время сборки на складе в часах (на FBS 24+ часто и именно поэтому FBS при общих равных проигрывает FBO)
“time2”:21 – время доставки со склада до ПВЗ. По сути, Вайлдберрис всегда знает куда вести товар т.к. у пользователя всегда в ГЕО стоит крайний ПВЗ и именно поэтому ранжирование меняется когда ручками ПВЗ меняешь на другой (например ПВЗ МСК, на ПВЗ ЕКБ)
В конце “totalQuantity”:633,”time1″:1,”time2″:21,”wh”:117501,”dtype”:4

Это общее количество и откуда ВБ будет отгружать именно аккаунту что сейчас смотрит

Фотографию карточки товара можно парсить следующим образом. Смотрите как я реализовал это в google sheets, можете переформатировать под свой код

у меня есть табличка со следующими столбцами:

A2:A - артикул
H2:H - ссылка на фото

Формула в H2: =СЦЕПИТЬ("https://basket-";J2;".wbbasket.ru/vol";I2;"/part";ЦЕЛОЕ(A2/1000);"/";A2;"/images/big/1.webp")

I2:I - номенклатура
формула в I2: =ЦЕЛОЕ(A2/100000)

J2:J - basket
формула в J2: =ЕСЛИ(I2<=143;"01";ЕСЛИ(I2<=287;"02";ЕСЛИ(I2<=431;"03";ЕСЛИ(I2<=719;"04";ЕСЛИ(I2<=1007;"05";ЕСЛИ(I2<=1061;"06";ЕСЛИ(I2<=1115;"07";ЕСЛИ(I2<=1169;"08";ЕСЛИ(I2<=1313;"09";ЕСЛИ(I2<=1601;"10";ЕСЛИ(I2<=1655;"11";ЕСЛИ(I2<=1919;"12";ЕСЛИ(I2<=2045;"13";ЕСЛИ(I2<=2189;"14";ЕСЛИ(I2<=2405;"15";ЕСЛИ(I2<=2621;"16";ЕСЛИ(I2<=2837;"17";ЕСЛИ(I2<=3053;"18";ЕСЛИ(I2<=3269;"19";ЕСЛИ(I2<=3485;"20";ЕСЛИ(I2<=3701;"21";"22")))))))))))))))))))))

Используя эти формулы, вы можете получить ссылку на фотографию карточки товара для любого артикула.
Переосмыслите их для своего кода.

